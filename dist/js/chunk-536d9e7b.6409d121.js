(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-536d9e7b"],{"08e9":function(t,e,a){},1686:function(t,e,a){"use strict";a.r(e);var n=(a("6b54"),a("a481"),a("96cf"),a("3b8d")),i=a("0dbc"),r=a("365c"),s=a("0f06").api,c={headers:{"Content-Type":"multipart/form-data"}},o=function(t){return r.a.get("".concat(s,"/web/tops"),{params:t})},l=function(t){var e=new FormData;for(var a in t)e.append(a,t[a]);return r.a.post("".concat(s,"/web/tops"),e,c)},d=function(t){return r.a.get("".concat(s,"/article/tops"),{params:t})},u=function(t){var e=new FormData;for(var a in t)e.append(a,t[a]);return r.a.post("".concat(s,"/article/tops"),e,c)},p=function(t){var e=new FormData;for(var a in t)e.append(a,t[a]);return r.a.post("".concat(s,"/web/updateexplain"),e,c)},h=function(t){var e=new FormData;for(var a in t)e.append(a,t[a]);return r.a.post("".concat(s,"/article/updateexplain"),e,c)},b={components:{sxDynamicInlineForm:i.a},props:{query:{type:null,default:function(){return null}}},data:function(){this.chartSettings={selectedMode:"single",hoverAnimation:!1};var t=this;return this.chartEvents={click:function(e){t.openExplain(e)}},{btnGroup:[{label:"近7天",value:7},{label:"近30天",value:30},{label:"近90天",value:90}],date:"",chartData:{columns:["日期","排名"],rows:[]},addAndEditDialog:!1,addAndDelStructure:{data:[{type:"input",model:"currentExplain",label:"现有说明:",disabled:!0,placeholder:"",rules:[]},{type:"input",model:"explain",label:"说明:",placeholder:"请输入说明",rules:[{required:!0,message:"请输入说明",trigger:"change"}]}]},addAndDelData:{},visible:!1,screeningOption:null,activeScreeningOption:null,explainIndex:0}},created:function(){this.activeScreeningOption=this.btnGroup[0],this.show()},methods:{show:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(){var e,a,n,i,r=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=!(r.length>0&&void 0!==r[0])||r[0],a=null,!e){t.next=17;break}t.t0=this.query.origin,t.next="websiteList"===t.t0?7:"articleList"===t.t0?11:15;break;case 7:return t.next=9,o(Object.assign({},this.query,{date:this.activeScreeningOption.value}));case 9:return a=t.sent,t.abrupt("break",15);case 11:return t.next=13,d(Object.assign({},this.query,{date:this.activeScreeningOption.value}));case 13:return a=t.sent,t.abrupt("break",15);case 15:t.next=28;break;case 17:t.t1=this.query.origin,t.next="websiteList"===t.t1?20:"articleList"===t.t1?24:28;break;case 20:return t.next=22,l(Object.assign({},this.query,this.activeScreeningOption,{date:""}));case 22:return a=t.sent,t.abrupt("break",28);case 24:return t.next=26,u(Object.assign({},this.query,{date:this.activeScreeningOption.value}));case 26:return a=t.sent,t.abrupt("break",28);case 28:for(n in this.chartData.rows=[],a.data.data)i=new Date(1e3*parseInt(a.data.data[n].CreateTime)).toLocaleString().replace(/:\d{1,2}$/," "),this.$set(this.chartData.rows,n,Object.assign({},{"日期":i,"排名":a.data.data[n].top},a.data.data[n]));case 32:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),changeOption:function(t){this.screeningOption=t,this.date=""},confirm:function(){this.date?(this.activeScreeningOption={label:this.date.toString(),star_time:this.date[0],end_time:this.date[1]},this.show(!1)):(this.activeScreeningOption=this.screeningOption,this.show()),this.visible=!1,this.date=""},openExplain:function(t){this.explainIndex=t.dataIndex,this.addAndDelData=Object.assign({},{currentExplain:this.chartData.rows[t.dataIndex].explain1}),this.addAndEditDialog=!0},dialogVisibleHandle:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.$refs.addAndDelForm.refreshData(),t.t0=this.query.origin,t.next="websiteList"===t.t0?4:"articleList"===t.t0?8:12;break;case 4:return t.next=6,p(Object.assign({},this.chartData.rows[this.explainIndex],this.addAndDelData));case 6:return e=t.sent,t.abrupt("break",12);case 8:return t.next=10,h(Object.assign({},this.chartData.rows[this.explainIndex],this.addAndDelData));case 10:return e=t.sent,t.abrupt("break",12);case 12:if(e){t.next=14;break}return t.abrupt("return");case 14:this.show(),this.addAndEditDialog=!1;case 16:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}},f=(a("74d8"),a("f813"),a("2877")),v=Object(f.a)(b,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"historicalRankingContainer"},[a("div",{staticClass:"historicalRankingContent"},[t.chartData.rows.length?a("el-popover",{attrs:{placement:"bottom-start",width:"400",trigger:"manual"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[a("div",{staticStyle:{padding:"10px"}},[a("p",{staticStyle:{"margin-bottom":"8px"}},[t._v("快捷筛选")]),a("div",{staticStyle:{"margin-bottom":"16px",width:"100%",display:"flex","justify-content":"space-between"}},t._l(t.btnGroup,function(e,n){return a("el-button",{key:n,on:{click:function(a){return t.changeOption(e)}}},[t._v(t._s(e.label))])}),1),a("p",{staticStyle:{"margin-bottom":"8px"}},[t._v("日期筛选")]),a("el-date-picker",{staticStyle:{width:"100% !important"},attrs:{"value-format":"yyyy-MM-dd",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),a("div",{staticStyle:{"margin-top":"26px",display:"flex","justify-content":"center"}},[a("el-button",{on:{click:function(e){t.visible=!1}}},[t._v("取消")]),a("el-button",{staticStyle:{"margin-left":"26px"},attrs:{type:"primary"},on:{click:t.confirm}},[t._v("确定")])],1)],1),a("el-button",{attrs:{slot:"reference"},on:{click:function(e){t.visible=!0}},slot:"reference"},[t._v(t._s(t.activeScreeningOption.label))])],1):t._e(),t.chartData.rows.length?a("ve-line",{attrs:{data:t.chartData,events:t.chartEvents}}):a("div",[t._v("暂无数据")])],1),t.addAndEditDialog?a("el-dialog",{attrs:{center:"","close-on-click-modal":!1,width:"500px",visible:t.addAndEditDialog},on:{"update:visible":function(e){t.addAndEditDialog=e}}},[a("sx-dynamic-inline-form",{ref:"addAndDelForm",attrs:{wrap:"",size:"small",structure:t.addAndDelStructure},model:{value:t.addAndDelData,callback:function(e){t.addAndDelData=e},expression:"addAndDelData"}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.dialogVisibleHandle}},[t._v("确 定")]),a("el-button",{staticStyle:{"margin-left":"30px"},on:{click:function(e){t.addAndEditDialog=!1}}},[t._v("取 消")])],1)],1):t._e()],1)},[],!1,null,"934224de",null);e.default=v.exports},"74d8":function(t,e,a){"use strict";var n=a("d22e");a.n(n).a},d22e:function(t,e,a){},f813:function(t,e,a){"use strict";var n=a("08e9");a.n(n).a}}]);