(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-5f600b61"],{"0ff8":function(e,t,a){"use strict";a.r(t);var n=(a("a481"),a("96cf"),a("3b8d")),r=(a("7514"),a("0dbc")),l=a("38f2"),i=a("365c"),o=a("0f06").api,c={headers:{"Content-Type":"multipart/form-data"}},s=function(e){var t=new FormData;for(var a in e)t.append(a,e[a]);return i.a.post("".concat(o,"/article/get"),t)},d=function(e){var t=new FormData;for(var a in e)t.append(a,e[a]);return i.a.post("".concat(o,"/article/insert"),t,c)},u=function(e){var t=new FormData;for(var a in e)t.append(a,e[a]);return i.a.post("".concat(o,"/article/update"),t,c)},p=function(e){var t=new FormData;for(var a in e)t.append("id",e[a].id);return i.a.post("".concat(o,"/article/delete"),t,c)},h=function(e,t,a){!function(e){var t=document.createElement("a");return t.href=e,void 0===[/^(http|https):$/.test(t.protocol),t.host,t.pathname!==e,t.pathname!=="/".concat(e)].find(function(e){return!e})}(t)?a(new Error("请输入正确网址, 网址格式如 (http|https)://...")):a()},g={components:{sxDynamicInlineForm:r.a,sxMinTable:l.a},data:function(){return{basicControlStructure:{data:[{type:"input",model:"name",label:"文章名称:",placeholder:"请输入"},{type:"daterange",model:"releaseTime",label:"发布时间:",placeholder:"请输入发布时间"},{type:"to",model:"currentPage",label:"当前页数:",placeholder:"请输入发布时间",structure:[{},{}]},{type:"to",model:"currentRanking",label:"当前排名:",placeholder:"请输入发布时间",structure:[{},{}]},{type:"select",model:"varty",label:"升降情况:",placeholder:"请选择",options:[{value:1,label:"升"},{value:-1,label:"降"}]}],buttonGroup:["search","clear"]},basicControlModel:{},tableStructure:[{prop:"name",label:"文章名称"},{prop:"url",label:"打开链接"},{prop:"CreateTime",label:"发布时间",width:"160",sortable:!0},{prop:"page",label:"当前页数",width:"100",sortable:!0},{prop:"top",label:"当前排名",width:"100",sortable:!0},{prop:"vary",label:"升降情况",width:"100",other:!0},{label:"操作",width:"170",contain:[{label:"查看历史排名"},{label:"编辑",style:"color: #E6A23C"},{label:"删除",style:"color: #F56C6C"}]}],tableData:[],tableLoading:!1,addAndDelStructure:{data:[{type:"input",model:"name",label:"文章名称:",placeholder:"请输入名称",rules:[{required:!0,message:"请输入文章名称",trigger:"change"}]},{type:"input",model:"url",label:"网址:",placeholder:"请输入网址",rules:[{required:!0,message:"网址不能为空",trigger:"change"},{validator:h,trigger:"blur"}]},{type:"input",model:"page",label:"页码:",placeholder:"请输入页码数",rules:[]}]},addAndDelData:{},addAndDelFlag:!0,addAndDelDialog:!1,selectionData:[],currentPage:1,pageSize:10,total:0}},created:function(){this.show()},methods:{show:function(){var e=Object(n.a)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.tableLoading=!0,e.next=3,s(Object.assign({},{page:this.currentPage},this.basicControlModel));case 3:if(t=e.sent,this.tableLoading=!1,t){e.next=7;break}return e.abrupt("return");case 7:this.tableData=t.data.data,this.total=t.data.count;case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),formatter:function(e,t){return e[t.property]?"CreateTime"===t.property?new Date(1e3*parseInt(e[t.property])).toLocaleString().replace(/:\d{1,2}$/," "):e[t.property]:""},onSubmit:function(e){var t={star_time:e.releaseTime.length?e.releaseTime[0]:"",end_time:e.releaseTime.length?e.releaseTime[1]:"",star_Npage:e.currentPage.length?e.currentPage[0]:"",end_Npage:e.currentPage.length?e.currentPage[1]:"",star_top:e.currentRanking.length?e.currentRanking[0]:"",end_top:e.currentRanking.length?e.currentRanking[1]:""};this.basicControlModel=Object.assign({},e,t),this.show()},handleSelectionChange:function(e){this.selectionData=e},operateClick:function(e,t,a){switch(a.label){case"查看历史排名":this.$router.push({name:"historicalRanking",query:{id:e.id,origin:"articleList"}});break;case"编辑":this.editHandle(e,t,a);break;case"删除":this.delHandle(e)}},cellClick:function(e,t){"url"===t.property&&window.open(e.url)},addHandle:function(){this.addAndDelData={},this.addAndDelDialog=!0,this.addAndDelFlag=!0},editHandle:function(e,t,a){this.addAndDelData=Object.assign({},e),this.addAndDelDialog=!0,this.addAndDelFlag=!1},delHandle:function(e){var t=this;if(e&&this.selectionData.push(e),!this.selectionData.length)return this.$message({type:"info",message:"未选择"});this.$confirm("此操作将删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(n.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(t.selectionData);case 2:e.sent&&t.show();case 4:case"end":return e.stop()}},e)})))},handleCurrentChange:function(e){this.show()},dialogVisibleHandle:function(){var e=Object(n.a)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null,t=Object.assign({},this.addAndDelData,this.$refs.addAndDelForm.getData()),!this.addAndDelFlag){e.next=8;break}return e.next=5,d(t);case 5:e.t0=e.sent,e.next=11;break;case 8:return e.next=10,u(t);case 10:e.t0=e.sent;case 11:e.t0&&(this.show(),this.addAndDelFlag={},this.addAndDelDialog=!1);case 14:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}},b=(a("c4a2"),a("2877")),m=Object(b.a)(g,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"websiteListContainer"},[a("div",{staticClass:"websiteListContent"},[a("sx-dynamic-inline-form",{attrs:{size:"small",structure:e.basicControlStructure},on:{onSubmit:e.onSubmit}}),a("div",{staticClass:"otherOperate"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.addHandle}},[e._v("添加")]),a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.delHandle(!1)}}},[e._v("批量删除")])],1),a("sx-min-table",{attrs:{loading:e.tableLoading,hasSelection:"","table-structure":e.tableStructure,"table-data":e.tableData,formatter:e.formatter},on:{cellClick:e.cellClick,handleSelectionChange:e.handleSelectionChange,operateClick:e.operateClick}})],1),a("div",{staticStyle:{"margin-top":"40px","text-align":"center"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pageSize,layout:"total, prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1),e.addAndDelDialog?a("el-dialog",{attrs:{center:"","close-on-click-modal":!1,width:"500px",visible:e.addAndDelDialog},on:{"update:visible":function(t){e.addAndDelDialog=t}}},[a("sx-dynamic-inline-form",{ref:"addAndDelForm",attrs:{wrap:"",size:"small",structure:e.addAndDelStructure},model:{value:e.addAndDelData,callback:function(t){e.addAndDelData=t},expression:"addAndDelData"}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.dialogVisibleHandle}},[e._v("确 定")]),a("el-button",{staticStyle:{"margin-left":"30px"},on:{click:function(t){e.addAndDelDialog=!1}}},[e._v("取 消")])],1)],1):e._e()],1)},[],!1,null,"62c2f1c1",null);t.default=m.exports},c4a2:function(e,t,a){"use strict";var n=a("e6d5");a.n(n).a},e6d5:function(e,t,a){}}]);